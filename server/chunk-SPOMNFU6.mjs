import './polyfills.server.mjs';
import{a as $}from"./chunk-ASEWUHNV.mjs";import{a as n,b as _}from"./chunk-ABCNLK2Q.mjs";import{a as c,b as g}from"./chunk-EVPDCH5S.mjs";import{G as i,_ as a,c as A,ca as m,f,ha as h,r as l,u as v}from"./chunk-6ZJAAIVQ.mjs";import{a as T,b as y}from"./chunk-VVCT4QZE.mjs";var I=(()=>{let s=class s{constructor(t,r){this._http=t,this._tenantService=r,this.baseUrl=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/procurements`}getLicitacoes(t){let r=new c().set("page",t.toString());return this._http.get(`${this.baseUrl}`,{params:r})}getLicitacoesWithFilters(t){return this._http.get(`${this.baseUrl}`,{params:t})}getLicitacoesDetalhes(t,r){let e=new c().set("page",r.toString()),o=`${this.baseUrl}/${t}/items`;return this._http.get(o,{params:e})}getLicitacoesArquivos(t,r,e){let o=new c().set("page",e.toString()),p=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/procurements/${r}/files`;return this._http.get(p,{params:o})}getLicitacoesItens(t,r){let e=new c().set("page",r.toString()),o=`${this.baseUrl}/${t}/items`;return this._http.get(o,{params:e})}getLicitacaoAtas(t,r){let e=new c().set("page",r.toString()),o=`${this.baseUrl}/${t}/minutes`;return this._http.get(o,{params:e})}getAtaArquivos(t,r){let e=new c().set("page",r.toString()),o=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/minutes/${t}/files`;return this._http.get(o,{params:e})}getOrgaos(t){let r=new c().set("page",t.toString());return this._http.get(this.baseUrl,{params:r})}getOrgaosAtualizado(t){let r=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/agencies`,e=new c().set("page",t.toString());return this._http.get(r,{params:e})}getLicitacaoById(t){return this._http.get(`${this.baseUrl}/${t}`)}createLicitacoes(t){return this._http.post(this.baseUrl,t)}createLicitacaoItem(t,r){let e=`${this.baseUrl}/${t}/items`;return this._http.post(e,r)}updateLicitacaoItem(t,r,e){let o=`${this.baseUrl}/${t}/items/${r}`;return this._http.put(o,e)}createArquivoLicitacao(t,r,e){let o=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/procurements/${r}/files`;return this._http.post(o,e)}createLicitacaoAta(t,r){let e=`${this.baseUrl}/${t}/minutes`;return this._http.post(e,r)}uploadArquivo(t,r){let e=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/minutes/${t}/files`;return this._http.post(e,r)}updateLicitacao(t,r){return this._http.put(`${this.baseUrl}/${t}`,r)}updateLicitacaoAta(t,r,e){let o=`${this.baseUrl}/${t}/minutes/${r}`;return this._http.put(o,e)}getResultadosItem(t,r){let e=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/procurements/${t}/items/${r}/results`;return this._http.get(e)}deleteLicitacao(t,r){let e={justification:r};return this._http.delete(`${this.baseUrl}/${t}`,{body:e})}deleteAta(t,r){let e=new c().set("justification",r),o=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/minutes/${t}`;return this._http.delete(o,{params:e})}deleteArquivos(t,r,e,o){let p=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/procurements/${r}/files/${e}`,d={justification:o};return this._http.delete(p,{params:d})}deleteAtasArquivo(t,r,e){let o=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/minutes/${t}/files/${r}`;return this._http.delete(o,{params:{justification:e}})}cancelarAta(t,r,e){let o=`${this.baseUrl}/${t}/minutes/${r}/cancel`;return this._http.put(o,e)}};s.\u0275fac=function(r){return new(r||s)(h(g),h(_))},s.\u0275prov=m({token:s,factory:s.\u0275fac,providedIn:"root"});let u=s;return u})();var j=(()=>{let s=class s{constructor(t,r){this._repository=t,this.toastr=r}getLicitacoesWithFilters(t){let r=new c({fromObject:y(T({},t),{page:t.page?.toString()||"1"})});return this._repository.getLicitacoesWithFilters(r)}getLicitacoes(t){return this._repository.getLicitacoes(t)}getLicitacoesDetalhes(t,r){return this._repository.getLicitacoesDetalhes(t,r)}getLicitacoesItens(t,r){return this._repository.getLicitacoesItens(t,r)}getLicitacoesArquivos(t,r,e){return this._repository.getLicitacoesArquivos(t,r,e)}getLicitacaoAtas(t,r){return this._repository.getLicitacaoAtas(t,r)}getAtaArquivos(t,r){return this._repository.getAtaArquivos(t,r)}getOrgaos(t){return this._repository.getOrgaos(t)}getOrgaosAtualizado(t){return this._repository.getOrgaosAtualizado(t)}getLicitacaoById(t){return this._repository.getLicitacaoById(t)}uploadArquivo(t,r){return new A(e=>{this._repository.uploadArquivo(t,r).subscribe({next:o=>{this.toastr.success("Arquivo enviado com sucesso!","Sucesso"),e.next(o),e.complete()},error:o=>{console.error("Erro ao enviar o arquivo:",o),this.toastr.error("Erro ao enviar o arquivo. Tente novamente.","Erro"),e.error(o)}})})}createLicitacoes(t){return this._repository.createLicitacoes(t).pipe(a(()=>this.toastr.success("Licita\xE7\xE3o criada com sucesso!")),i(r=>(this.toastr.error("Erro ao criar a licita\xE7\xE3o.","Erro"),l(()=>r))))}createLicitacaoItem(t){return this._repository.createLicitacaoItem(t.procurement,t.item).pipe(a(()=>this.toastr.success("Item criado com sucesso!")),i(r=>(this.toastr.error("Erro ao criar o item.","Erro"),l(()=>r))))}createArquivoLicitacao(t){return this._repository.createArquivoLicitacao(t.tenant,t.procurement,t.file).pipe(a(()=>this.toastr.success("Arquivo enviado com sucesso!")),i(r=>(this.toastr.error("Erro ao enviar o arquivo.","Erro"),l(()=>r))))}createLicitacaoAta(t,r){return this._repository.createLicitacaoAta(t,r).pipe(a(()=>this.toastr.success("ATA criada com sucesso!")),i(e=>(this.toastr.error("Erro ao criar a ATA.","Erro"),l(()=>e))))}updateLicitacaoAta(t,r,e){return this._repository.updateLicitacaoAta(t,r,e).pipe(a(()=>this.toastr.success("ATA atualizada com sucesso!")),i(o=>(this.toastr.error("Erro ao atualizar a ATA.","Erro"),l(()=>o))))}updateLicitacao(t,r){return this._repository.updateLicitacao(t,r).pipe(a(()=>this.toastr.success("Licita\xE7\xE3o atualizada com sucesso!")),i(e=>(this.toastr.error("Erro ao atualizar a licita\xE7\xE3o.","Erro"),l(()=>e))))}updateLicitacaoItem(t,r,e){return this._repository.updateLicitacaoItem(t,r,e).pipe(a(()=>{this.toastr.success("Item atualizado com sucesso!","Sucesso")}),i(o=>{throw this.toastr.error("Erro ao atualizar o item. Tente novamente.","Erro"),o}))}getResultadosItem(t,r){return this._repository.getResultadosItem(t,r)}deleteResultado(){}deleteAtasArquivo(t,r,e){return this._repository.deleteAtasArquivo(t,r,e).pipe(a(()=>{this.toastr.success("Arquivo exclu\xEDdo com sucesso!","Sucesso")}),i(o=>(this.toastr.error("Erro ao excluir o arquivo.","Erro"),l(()=>o))))}deleteLicitacao(t,r){return this._repository.deleteLicitacao(t,r)}deleteAta(t,r){return new A(e=>{this._repository.deleteAta(t,r).subscribe({next:()=>{this.toastr.success("ATA exclu\xEDda com sucesso!","Sucesso"),e.next(),e.complete()},error:o=>{this.toastr.error("Erro ao excluir a ATA.","Erro"),e.error(o)}})})}cancelarAta(t,r,e){return this._repository.cancelarAta(t,r,e).pipe(a(()=>{this.toastr.success("ATA cancelada com sucesso!","Sucesso")}),i(o=>{throw this.toastr.error("Erro ao cancelar a ATA. Tente novamente.","Erro"),o}))}deleteArquivos(t,r,e,o){return this._repository.deleteArquivos(t,r,e,o).pipe(a(()=>{this.toastr.success("Arquivo exclu\xEDdo com sucesso!","Sucesso")}),i(p=>{throw this.toastr.error("Erro ao excluir o arquivo. Tente novamente.","Erro"),p}))}};s.\u0275fac=function(r){return new(r||s)(h(I),h($))},s.\u0275prov=m({token:s,factory:s.\u0275fac,providedIn:"root"});let u=s;return u})();var q=(()=>{let s=class s{constructor(t,r){this._http=t,this._tenantService=r,this.baseUrl=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/contracts`}getContratos(t){let r=new c().set("page",t.toString());return this._http.get(this.baseUrl,{params:r})}createContrato(t){return this._http.post(this.baseUrl,t)}createTermoContrato(t){let r=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/terms`;return this._http.post(r,t)}getContratoById(t){return this._http.get(`${this.baseUrl}/${t}`)}deleteContrato(t,r){let e={justification:r};return this._http.delete(`${this.baseUrl}/${t}`,{body:e})}deleteTermosContrato(t,r){let e=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/terms/${t}`,o={justification:r};return this._http.delete(e,{params:o}).pipe(a(()=>console.log("Contrato exclu\xEDdo com sucesso!")),i(p=>{throw console.error("Erro ao excluir contrato:",p),p}))}deleteArquivoTermos(t,r,e){let o=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/terms/${t}/files/${r.id}`,p={justification:e};return this._http.delete(o,{params:p}).pipe(i(d=>{throw console.error(`Erro ao excluir o arquivo ${r.label}:`,d),d}))}updateContrato(t,r){return this._http.put(`${this.baseUrl}/${t}`,r)}getArquivosContractFiles(t,r){let e=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/contracts/${t}/files`,o=new c().set("page",r.toString());return this._http.get(e,{params:o})}getContractFiles(t,r){let e=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/terms/${t}/files`,o=new c().set("page",r.toString());return this._http.get(e,{params:o})}deleteFileTermos(t){let r=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/files/${t}`;return this._http.delete(r)}createTermosContratos(t,r){let e=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/terms/${t}/files`;return this._http.post(e,r)}createArquivoContrato(t,r){let e=`${this.baseUrl}/${t}/files`;return this._http.post(e,r)}deleteArquivoContrato(t,r,e){let o=`${this.baseUrl}/${t}/files/${r}`,p=new c().set("justification",e);return this._http.delete(o,{params:p})}getContractTerms(t,r){let e=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/terms`,o=new c().set("contract_id",t).set("page",r.toString());return this._http.get(e,{params:o})}getTermoById(t){let r=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/terms/${t}`;return this._http.get(r)}updateTermoContrato(t,r){let e=`${n.API_URL}/tenants/${this._tenantService.getTenant()}/pncp/terms/${t}`;return this._http.put(e,r)}uploadFile(t,r){return this._http.post(t,r)}};s.\u0275fac=function(r){return new(r||s)(h(g),h(_))},s.\u0275prov=m({token:s,factory:s.\u0275fac,providedIn:"root"});let u=s;return u})();var W=(()=>{let s=class s{constructor(t,r){this._repository=t,this.toastr=r,this.contratosUpdated=new f}getContratos(t){return this._repository.getContratos(t)}createContrato(t){return this._repository.createContrato(t).pipe(a(()=>this.toastr.success("Contrato criado com sucesso!")),i(r=>{throw this.toastr.error("Erro ao criar contrato."),r}))}createTermo(t){return this._repository.createTermoContrato(t).pipe(a(()=>this.toastr.success("Termo criado com sucesso!")),i(r=>{throw this.toastr.error("Erro ao criar termo."),r}))}getContratoById(t){return this._repository.getContratoById(t).pipe(v(r=>{if(!r||!r.data)throw new Error("Contrato n\xE3o encontrado.");return r.data}),i(r=>{throw r}))}getContractTerms(t,r){return this._repository.getContractTerms(t,r)}getContractFiles(t,r){return this._repository.getContractFiles(t,r)}getArquivosContractFiles(t,r){return this._repository.getArquivosContractFiles(t,r)}updateContrato(t,r){return this._repository.updateContrato(t,r).pipe(a(()=>this.toastr.success("Contrato atualizado com sucesso!")),i(e=>{throw this.toastr.error("Erro ao atualizar contrato."),e}))}deleteContrato(t,r){return this._repository.deleteContrato(t,r).pipe(a(()=>this.toastr.success("Contrato exclu\xEDdo com sucesso!")),i(e=>{throw this.toastr.error("Erro ao excluir contrato."),e}))}deleteTermosContrato(t,r){return this._repository.deleteTermosContrato(t,r).pipe(a(()=>{this.toastr.success("Contrato exclu\xEDdo com sucesso!"),this.contratosUpdated.next()}),i(e=>{throw this.toastr.error("Erro ao excluir contrato."),e}))}getContratosUpdatedListener(){return this.contratosUpdated.asObservable()}deleteArquivoTermos(t,r,e){return this._repository.deleteArquivoTermos(t,r,e).pipe(a(()=>this.toastr.success(`Arquivo "${r.label}" exclu\xEDdo com sucesso!`)),i(o=>{throw this.toastr.error(`Erro ao excluir o arquivo "${r.label}".`),o}))}createTermosContratos(t,r){return this._repository.createTermosContratos(t,r).pipe(a(()=>this.toastr.success("Termos do contrato criados com sucesso!")),i(e=>{throw this.toastr.error("Erro ao criar termos do contrato."),e}))}createArquivoContrato(t,r){return this._repository.createArquivoContrato(t,r).pipe(a(()=>this.toastr.success("Arquivo do contrato criado com sucesso!")),i(e=>{throw this.toastr.error("Erro ao criar arquivo do contrato."),e}))}deleteArquivoContrato(t,r,e){return this._repository.deleteArquivoContrato(t,r,e).pipe(a(()=>this.toastr.success("Arquivo exclu\xEDdo com sucesso!")),i(o=>{throw this.toastr.error("Erro ao excluir o arquivo."),o}))}getTermoById(t){return this._repository.getTermoById(t).pipe(v(r=>{if(!r||!r.data)throw new Error("Termo n\xE3o encontrado.");return r.data}),i(r=>{throw r}))}updateTermo(t,r){return this._repository.updateTermoContrato(t,r).pipe(a(()=>this.toastr.success("Termo atualizado com sucesso!")),i(e=>{throw this.toastr.error("Erro ao atualizar termo."),e}))}uploadFile(t,r){return this._repository.uploadFile(t,r).pipe(a(()=>this.toastr.success("Arquivo enviado com sucesso!")),i(e=>{throw this.toastr.error("Erro ao enviar arquivo."),e}))}deleteFileTermos(t){return this._repository.deleteFileTermos(t).pipe(a(()=>this.toastr.success("Arquivo exclu\xEDdo com sucesso!")),i(r=>{throw this.toastr.error("Erro ao excluir arquivo."),r}))}};s.\u0275fac=function(r){return new(r||s)(h(q),h($))},s.\u0275prov=m({token:s,factory:s.\u0275fac,providedIn:"root"});let u=s;return u})();export{j as a,W as b};
